# Recruit餐厅访客预测：迁移学习项目实施步骤文档

## 项目背景与目标

本项目旨在基于日本餐厅数据，利用迁移学习技术预测餐厅客流量。数据来源包括两个平台：
- AIR平台：包含真实的客流量数据（air_visit_data.csv）
- HPG平台：仅包含预订数据

我们的目标是利用AIR平台丰富的客流量真实数据，通过迁移学习技术帮助HPG平台提升客流预测准确性。

## 数据集说明

### AIR平台数据
- **air_visit_data.csv**: AIR平台餐厅的真实客流量数据，包含air_store_id、visit_date、visitors三列
- **air_reserve.csv**: AIR平台餐厅的预订数据
- **air_store_info.csv**: AIR平台餐厅的基本信息

### HPG平台数据
- **hpg_reserve.csv**: HPG平台餐厅的预订数据
- **hpg_store_info.csv**: HPG平台餐厅的基本信息

### 关联数据
- **store_id_relation.csv**: AIR和HPG平台间相同餐厅的ID映射关系
- **date_info.csv**: 日期相关信息（是否节假日等）
- **sample_submission.csv**: 提交样例文件

## 实施步骤

### 第一步：数据加载与预处理

1. 加载所有原始数据文件
2. 对AIR平台的真实客流量数据进行对数变换：`log1p(visitors)`
3. 处理预订数据的时间信息，提取日期并计算预订提前天数
4. 合并关联数据，建立AIR和HPG平台间的联系

### 第二步：特征工程

1. **基础特征构建**：
   - 日期特征：星期几、是否周末/节假日等
   - 地理位置特征：经纬度信息
   - 餐厅属性特征：类型、区域等的计数编码

2. **预订相关特征**：
   - 统计每个餐厅的预订情况（预订提前天数、预订人数等）
   - 按日期聚合的预订特征

3. **历史访问特征**：
   - 不同时间窗口内的统计特征（均值、中位数、最大值、最小值、标准差等）

### 第三步：数据集划分

根据时间顺序将AIR平台数据划分为训练集和测试集：
- 训练集：2016-01-01至2017-04-14
- 测试集：2017-04-15至2017-04-22

注意：保持时间顺序，避免未来信息泄露。

### 第四步：构建HPG训练数据

由于HPG平台没有真实客流量数据，我们通过以下方式构建训练数据：
1. 利用HPG预订数据，通过store_id_relation.csv映射到AIR平台的ID体系
2. 聚合同一餐厅同一天的预订数据作为模拟的"客流量"
3. 对聚合后的预订数据同样进行对数变换

### 第五步：生成标准化中间产物

生成三个标准化的数据集文件：
1. **air_train.csv**: AIR平台训练集，包含特征X和真实标签Y
2. **air_test.csv**: AIR平台测试集，包含特征X和真实标签Y
3. **hpg_train.csv**: HPG平台训练集，包含特征X和模拟标签Y

这些数据集将作为后续迁移学习任务的输入。

## 迁移学习策略

我们将采用从AIR到HPG的迁移学习策略，原因如下：
1. AIR平台拥有真实的客流量数据，数据质量更高
2. AIR平台数据时间跨度更长，特征更丰富
3. 部分餐厅仅在AIR平台存在，具有独特性价值

通过迁移学习，我们可以将在AIR平台学到的知识迁移到HPG平台，提升HPG平台的客流预测能力。